{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/DELL/Desktop/Simplon%20exercices/Mini%20projects/11--betterAuth/nextjs-better-auth/src/routes.ts"],"sourcesContent":["export const publicRoutes: string[] = [\"/\", \"/about\", \"/besoins\"];\r\n\r\nexport const authRoutes: string[] = [\"/signin\", \"/signup\", \"/forgot-password\"];\r\n\r\nexport const protectedRoutes: string[] = [\"/proposer-un-besoin\", \"/mon-espace\"];\r\n\r\nexport const apiAuthPrefix: string = \"/api/auth\";\r\n\r\nexport const DEFAULT_LOGIN_REDIRECT: string = \"/\";\r\n"],"names":[],"mappings":";;;;;;;;;;;;AAAO,MAAM,eAAyB;IAAC;IAAK;IAAU;CAAW;AAE1D,MAAM,aAAuB;IAAC;IAAW;IAAW;CAAmB;AAEvE,MAAM,kBAA4B;IAAC;IAAuB;CAAc;AAExE,MAAM,gBAAwB;AAE9B,MAAM,yBAAiC"}},
    {"offset": {"line": 78, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/DELL/Desktop/Simplon%20exercices/Mini%20projects/11--betterAuth/nextjs-better-auth/src/proxy.ts"],"sourcesContent":["import { NextResponse, type NextRequest } from \"next/server\";\r\nimport { getSessionCookie } from \"better-auth/cookies\";\r\n\r\nimport {\r\n  apiAuthPrefix,\r\n  authRoutes,\r\n  DEFAULT_LOGIN_REDIRECT,\r\n  publicRoutes,\r\n} from \"./routes\";\r\n\r\n// Routes publiques qui acceptent des paramètres dynamiques (ex: /besoins/1)\r\nconst publicRoutePrefixes = [\"/besoins\"];\r\n\r\nexport async function proxy(request: NextRequest) {\r\n  const session = getSessionCookie(request);\r\n  const pathname = request.nextUrl.pathname;\r\n\r\n  const isApiAuth = pathname.startsWith(apiAuthPrefix);\r\n\r\n  // Vérifie si c'est une route publique exacte ou une route avec préfixe public\r\n  const isPublicRoute = \r\n    publicRoutes.includes(pathname) ||\r\n    publicRoutePrefixes.some((prefix) => pathname.startsWith(prefix));\r\n\r\n  const isAuthRoute = () => {\r\n    return authRoutes.some((path) => pathname.startsWith(path));\r\n  };\r\n\r\n  if (isApiAuth) {\r\n    return NextResponse.next();\r\n  }\r\n\r\n  if (isAuthRoute()) {\r\n    if (session) {\r\n      return NextResponse.redirect(\r\n        new URL(DEFAULT_LOGIN_REDIRECT, request.url),\r\n      );\r\n    }\r\n    return NextResponse.next();\r\n  }\r\n\r\n  if (!session && !isPublicRoute) {\r\n    return NextResponse.redirect(new URL(\"/signin\", request.url));\r\n  }\r\n\r\n  return NextResponse.next();\r\n}\r\n\r\nexport const config = {\r\n  matcher: [\r\n    /*\r\n     * Match all request paths except for the ones starting with:\r\n     * - _next/static (static files)\r\n     * - _next/image (image optimization files)\r\n     * - favicon.ico (favicon file)\r\n     * Feel free to modify this pattern to include more paths.\r\n     */\r\n    \"/((?!_next/static|_next/image|favicon.ico|.*\\\\.(?:svg|png|jpg|jpeg|gif|webp)$).*)\",\r\n  ],\r\n};\r\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AAEA;;;;AAOA,4EAA4E;AAC5E,MAAM,sBAAsB;IAAC;CAAW;AAEjC,eAAe,MAAM,OAAoB;IAC9C,MAAM,UAAU,IAAA,+LAAgB,EAAC;IACjC,MAAM,WAAW,QAAQ,OAAO,CAAC,QAAQ;IAEzC,MAAM,YAAY,SAAS,UAAU,CAAC,8HAAa;IAEnD,8EAA8E;IAC9E,MAAM,gBACJ,6HAAY,CAAC,QAAQ,CAAC,aACtB,oBAAoB,IAAI,CAAC,CAAC,SAAW,SAAS,UAAU,CAAC;IAE3D,MAAM,cAAc;QAClB,OAAO,2HAAU,CAAC,IAAI,CAAC,CAAC,OAAS,SAAS,UAAU,CAAC;IACvD;IAEA,IAAI,WAAW;QACb,OAAO,8IAAY,CAAC,IAAI;IAC1B;IAEA,IAAI,eAAe;QACjB,IAAI,SAAS;YACX,OAAO,8IAAY,CAAC,QAAQ,CAC1B,IAAI,IAAI,uIAAsB,EAAE,QAAQ,GAAG;QAE/C;QACA,OAAO,8IAAY,CAAC,IAAI;IAC1B;IAEA,IAAI,CAAC,WAAW,CAAC,eAAe;QAC9B,OAAO,8IAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,WAAW,QAAQ,GAAG;IAC7D;IAEA,OAAO,8IAAY,CAAC,IAAI;AAC1B;AAEO,MAAM,SAAS;IACpB,SAAS;QACP;;;;;;KAMC,GACD;KACD;AACH"}}]
}